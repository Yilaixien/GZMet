我需要你帮助我吧地理底图的光影去掉：<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>迁入广州来源地迁徙图</title>
  <script src="https://gzmet.ylxe.top/metdata/543echarts.min.js" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
    }
    body {
      background: linear-gradient(135deg, #f8f9fa, #eef2f6);
      color: #333;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    header {
      text-align: center;
      padding: 30px 0;
      margin-bottom: 20px;
      position: relative;
    }
    .header-gradient {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(79, 192, 255, 0.2) 0%, transparent 70%);
      z-index: 0;
      opacity: 0.3;
    }
    h1 {
      font-size: 2.8rem;
      margin-bottom: 15px;
      background: linear-gradient(90deg, #1a73e8, #6c5ce7, #e84393);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 1px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .subtitle {
      color: #5f6368;
      font-size: 1.25rem;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.7;
      font-weight: 400;
      position: relative;
      z-index: 1;
    }
    .chart-container {
      background: #fff;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      margin-bottom: 35px;
      height: 700px;
      border: 1px solid #e0e0e0;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .chart-container:hover {
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }
    .chart-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #1a73e8, #6c5ce7, #e84393);
      border-radius: 4px 4px 0 0;
    }
    #migration-chart {
      width: 100%;
      height: 100%;
    }
    .info-panel {
      display: flex;
      gap: 25px;
      margin-bottom: 35px;
      flex-wrap: wrap;
    }
    .panel {
      background: #fff;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      flex: 1;
      min-width: 300px;
      border: 1px solid #e0e0e0;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .panel:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
    }
    .panel h2 {
      color: #1a73e8;
      margin-bottom: 20px;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      padding-bottom: 12px;
      border-bottom: 2px solid #f0f0f0;
    }
    .panel h2 i {
      margin-right: 12px;
      font-size: 1.4rem;
      color: #6c5ce7;
    }
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5px;
    }
    .data-table th {
      background: #f5f7fa;
      padding: 14px 18px;
      text-align: left;
      font-weight: 600;
      color: #2d3748;
      border-bottom: 2px solid #e2e8f0;
    }
    .data-table td {
      padding: 14px 18px;
      border-bottom: 1px solid #edf2f7;
      color: #4a5568;
    }
    .data-table tr:last-child td {
      border-bottom: none;
    }
    .data-table tr:hover {
      background: #f8f9fa;
    }
    .footer {
      text-align: center;
      padding: 25px;
      color: #718096;
      font-size: 1rem;
      border-top: 1px solid #e2e8f0;
      margin-top: 20px;
      border-radius: 0 0 16px 16px;
      background: #fff;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.03);
    }
    .legend {
      display: flex;
      justify-content: center;
      gap: 35px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .legend-item {
      display: flex;
      align-items: center;
      background: #fff;
      padding: 8px 15px;
      border-radius: 30px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }
    .legend-color {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      margin-right: 10px;
    }
    .legend-text {
      font-size: 1rem;
      color: #4a5568;
      font-weight: 500;
    }
    .analytics p {
      padding: 10px 0;
      border-bottom: 1px dashed #e2e8f0;
      margin-bottom: 8px;
      color: #4a5568;
    }
    .analytics p:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }
    .analytics strong {
      color: #1a73e8;
    }
    @media (max-width: 768px) {
      .chart-container {
        height: 500px;
        padding: 15px;
      }
      h1 {
        font-size: 2.2rem;
      }
      .subtitle {
        font-size: 1.05rem;
      }
      .panel {
        padding: 20px;
      }
      .legend {
        gap: 15px;
      }
    }
    @media (max-width: 480px) {
      h1 {
        font-size: 1.8rem;
      }
      .legend-item {
        padding: 6px 12px;
      }
    }
    .legend-fixed {
      position: absolute;
      left: 30px;
      bottom: 30px;
      background: rgba(255,255,255,0.92);
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      padding: 12px 24px;
      z-index: 10;
      display: flex;
      flex-direction: row;
      gap: 28px;
      min-width: 260px;
    }
    .source-fixed {
      position: absolute;
      right: 30px;
      bottom: 30px;
      background: rgba(255,255,255,0.92);
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      padding: 10px 22px;
      font-size: 1rem;
      color: #718096;
      z-index: 10;
    }
    .note {
      text-align: center;
      margin: 15px 0;
      font-size: 0.9rem;
      color: #718096;
      font-style: italic;
    }
    .highlight {
      background: linear-gradient(120deg, rgba(26,115,232,0.1) 0%, rgba(232,67,147,0.1) 100%);
      padding: 3px 6px;
      border-radius: 4px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-gradient"></div>
      <h1><i class="fas fa-route"></i> 迁入广州来源地迁徙图</h1>
      <p class="subtitle">可视化展示迁入广州的主要来源城市及迁移比例，数据基于最新人口迁移统计报告</p>
    </header>
    
    <div class="chart-container" style="position: relative;">
      <div id="migration-chart"></div>
      <div class="legend legend-fixed">
        <div class="legend-item">
          <div class="legend-color" style="background: #FF7979;"></div>
          <div class="legend-text">迁徙路径</div>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #FFEA00;"></div>
          <div class="legend-text">迁徙动画</div>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #1a73e8; opacity: 0.5;"></div>
          <div class="legend-text">主要来源城市</div>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #e84393;"></div>
          <div class="legend-text">广州</div>
        </div>
      </div>
      <div class="source-fixed">
        数据来源：人口迁移统计报告
      </div>
    </div>
    
    <div class="note">注：<span class="highlight">佛山市和东莞市</span>的圆圈已调整为50%透明度，但文字保持100%不透明度</div>
    
    <div class="info-panel">
      <div class="panel">
        <h2><i class="fas fa-city"></i> 主要迁入城市</h2>
        <div class="analytics">
          <p><strong>佛山市</strong> 作为广州最近的城市，迁移比例高达 <strong>45.77%</strong></p>
          <p><strong>东莞市</strong> 位居第二，迁移比例为 <strong>17.89%</strong></p>
          <p><strong>深圳市</strong> 迁移比例为 <strong>7.17%</strong></p>
          <p><strong>中山市</strong> 迁移比例为 <strong>5.56%</strong></p>
        </div>
      </div>
      
      <div class="panel">
        <h2><i class="fas fa-chart-line"></i> 数据分析</h2>
        <div class="analytics">
          <p>前5大城市占迁入广州总人口的 <strong>76.3%</strong></p>
          <p>广东省内城市占比 <strong>98.7%</strong></p>
          <p>省外城市占比最高的为 <strong>衡阳市</strong> (0.13%)</p>
          <p>平均迁移距离为 <strong>105公里</strong></p>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>© 2023 人口迁移可视化分析 | 数据更新时间: 2023年10月</p>
    </div>
  </div>
  
  <script defer>
    // 数据常量
    const cityCoords = {
      '广州市': [113.264385, 23.129112], '佛山市': [113.121416, 23.021548], '东莞市': [113.751765, 23.020536],
      '深圳市': [114.057868, 22.543099], '清远市': [113.056031, 23.681764], '惠州市': [114.416196, 23.111847],
      '中山市': [113.39277, 22.517645], '肇庆市': [112.465091, 23.047191], '江门市': [113.081901, 22.578738],
      '珠海市': [113.576726, 22.270715], '湛江市': [110.358941, 21.270707], '茂名市': [110.925456, 21.662999],
      '韶关市': [113.597522, 24.810403], '云浮市': [112.044491, 22.915094], '汕头市': [116.681972, 23.354091],
      '阳江市': [111.982232, 21.857958], '河源市': [114.700447, 23.743686], '衡阳市': [112.571997, 26.89323],
      '揭阳市': [116.372831, 23.549993], '长沙市': [112.938884, 28.22808], '梅州市': [116.122238, 24.288615],
      '赣州市': [114.935909, 25.845296], '汕尾市': [115.375279, 22.78725]
    };
    
    const migrationData = [
      { fromName: "佛山市", toName: "广州市", value: 0.4577 }, { fromName: "东莞市", toName: "广州市", value: 0.1789 },
      { fromName: "深圳市", toName: "广州市", value: 0.0717 }, { fromName: "中山市", toName: "广州市", value: 0.0556 },
      { fromName: "清远市", toName: "广州市", value: 0.0563 }, { fromName: "惠州市", toName: "广州市", value: 0.0461 },
      { fromName: "江门市", toName: "广州市", value: 0.0327 }, { fromName: "肇庆市", toName: "广州市", value: 0.0304 },
      { fromName: "珠海市", toName: "广州市", value: 0.0164 }, { fromName: "韶关市", toName: "广州市", value: 0.0089 },
      { fromName: "云浮市", toName: "广州市", value: 0.0082 }, { fromName: "河源市", toName: "广州市", value: 0.0071 },
      { fromName: "阳江市", toName: "广州市", value: 0.0057 }, { fromName: "茂名市", toName: "广州市", value: 0.0047 },
      { fromName: "赣州市", toName: "广州市", value: 0.0005 }, { fromName: "湛江市", toName: "广州市", value: 0.0033 },
      { fromName: "汕头市", toName: "广州市", value: 0.0024 }, { fromName: "揭阳市", toName: "广州市", value: 0.0033 },
      { fromName: "汕尾市", toName: "广州市", value: 0.0034 }, { fromName: "长沙市", toName: "广州市", value: 0.0013 }
    ];
    
    // 计算两点间距离
    function calcDistance(coord1, coord2) {
      const R = 6371, dLat = (coord2[1] - coord1[1]) * Math.PI / 180, dLon = (coord2[0] - coord1[0]) * Math.PI / 180;
      const a = Math.sin(dLat/2) ** 2 + Math.cos(coord1[1] * Math.PI / 180) * Math.cos(coord2[1] * Math.PI / 180) * Math.sin(dLon/2) ** 2;
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    }
    
    // 地图加载后再初始化 ECharts
    window.addEventListener('DOMContentLoaded', function() {
      fetch('https://gzmet.ylxe.top/metdata/china.json')
        .then(response => response.json())
        .then(chinaJson => {
          const chart = echarts.init(document.getElementById('migration-chart'));
          echarts.registerMap('china', chinaJson);
          
          chart.setOption({
            backgroundColor: 'transparent',
            title: {
              text: '迁入广州来源地迁徙图',
              left: 'center',
              textStyle: { 
                color: '#2d3748', 
                fontSize: 24, 
                fontWeight: 'bold',
                fontFamily: 'Microsoft YaHei'
              },
              subtext: '数据来源：人口迁移统计报告',
              subtextStyle: {
                color: '#718096',
                fontSize: 14,
                padding: [10, 0, 0, 0]
              }
            },
            tooltip: {
              trigger: 'item',
              backgroundColor: 'rgba(255,255,255,0.95)',
              borderColor: '#e2e8f0',
              borderWidth: 1,
              textStyle: { color: '#2d3748', fontSize: 14 },
              formatter: function(params) {
                if (params.componentType === 'series' && params.seriesType === 'lines') {
                  return `<div style="font-size:16px;font-weight:bold;margin-bottom:5px;color:#1a73e8">${params.data.fromName} → ${params.data.toName}</div>
                          <div>比例: <span style="color:#e84393;font-weight:bold">${(params.data.value * 100).toFixed(2)}%</span></div>
                          <div>距离: <span style="color:#1a73e8">${Math.round(calcDistance(cityCoords[params.data.fromName], cityCoords[params.data.toName]))}公里</span></div>`;
                } else if (params.componentType === 'series' && params.seriesType === 'scatter') {
                  if (params.data.ratio !== undefined && params.data.name !== '广州市') {
                    return `<div style="font-size:16px;font-weight:bold;color:#1a73e8">${params.data.name}</div>
                            <div>迁入比例: <span style="color:#e84393;font-weight:bold">${(params.data.ratio * 100).toFixed(2)}%</span></div>`;
                  }
                }
                return params.name;
              }
            },
            geo: {
              map: 'china',
              roam: true,
              zoom: 5.5,
              center: [113.5, 23.5],
              label: { show: false, emphasis: { show: false } },
              itemStyle: { 
                areaColor: '#f5f0e6', 
                borderColor: '#d1c7b7', 
                borderWidth: 1,
                shadowColor: 'rgba(0,0,0,0.1)',
                shadowBlur: 10,
                shadowOffsetX: 2,
                shadowOffsetY: 2
              },
              emphasis: { 
                itemStyle: { 
                  areaColor: '#e8e0d1',
                  borderWidth: 2,
                  borderColor: '#a89f8e'
                }, 
                label: { 
                  show: false 
                } 
              }
            },
            series: [
              {
                type: 'lines',
                coordinateSystem: 'geo',
                data: migrationData.map(item => ({
                  coords: [cityCoords[item.fromName], cityCoords[item.toName]],
                  fromName: item.fromName,
                  toName: item.toName,
                  value: item.value
                })),
                effect: {
                  show: true, 
                  period: 4, 
                  trailLength: 0.1, 
                  symbol: 'arrow', 
                  symbolSize: 8, 
                  color: '#FFEA00'
                },
                lineStyle: {
                  color: { 
                    type: 'linear', 
                    x: 0, 
                    y: 0, 
                    x2: 1, 
                    y2: 0, 
                    colorStops: [
                      { offset: 0, color: '#FF7979' }, 
                      { offset: 1, color: '#6c5ce7' }
                    ]
                  },
                  width: 2, 
                  opacity: 0.8, 
                  curveness: 0.2
                },
                zlevel: 2
              },
              {
                type: 'scatter',
                coordinateSystem: 'geo',
                data: migrationData.map(item => {
                  const isFoshanOrDongguan = item.fromName === "佛山市" || item.fromName === "东莞市";
                  
                  return {
                    name: item.fromName,
                    value: cityCoords[item.fromName],
                    ratio: item.value,
                    symbolSize: Math.max(10, item.value * (isFoshanOrDongguan ? 120 : 100)),
                    itemStyle: { 
                      color: '#1a73e8', 
                      // 关键修改：调整佛山市和东莞市的透明度为50%
                      opacity: isFoshanOrDongguan ? 0.5 : 1,
                      shadowColor: 'rgba(26,115,232,0.3)', 
                      shadowBlur: 8 
                    }
                  };
                }),
                symbol: 'circle',
                zlevel: 3,
                label: {
                  show: true,
                  formatter: '{b}',
                  position: 'bottom',
                  color: '#2d3748',
                  fontSize: 12,
                  fontWeight: 'bold',
                  backgroundColor: 'rgba(255,255,255,0.8)',
                  padding: [4,8],
                  borderRadius: 4,
                  borderWidth: 1,
                  borderColor: '#e2e8f0',
                  shadowBlur: 3,
                  shadowColor: 'rgba(0,0,0,0.1)',
                  distance: 10,
                  // 字体保持100%不透明
                  textStyle: {
                    color: '#2d3748',
                    opacity: 1
                  }
                },
                emphasis: {
                  label: {
                    show: true,
                    color: '#1a73e8',
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    textStyle: {
                      opacity: 1
                    }
                  },
                  itemStyle: {
                    shadowBlur: 12,
                    shadowColor: 'rgba(26,115,232,0.5)'
                  }
                }
              },
              {
                type: 'scatter',
                coordinateSystem: 'geo',
                data: [{
                  name: '广州市',
                  value: cityCoords['广州市'],
                  symbolSize: 25,
                  itemStyle: { 
                    color: '#e84393', 
                    shadowColor: 'rgba(232,67,147,0.3)', 
                    shadowBlur: 12 
                  }
                }],
                symbol: 'pin',
                symbolOffset: [0, -15],
                zlevel: 4,
                label: {
                  show: true,
                  formatter: '{b}',
                  position: 'top',
                  color: '#e84393',
                  fontSize: 16,
                  fontWeight: 'bold',
                  backgroundColor: 'rgba(255,255,255,0.8)',
                  padding: [5,10],
                  borderRadius: 4,
                  borderWidth: 1,
                  borderColor: '#fad7e7',
                  shadowBlur: 3,
                  shadowColor: 'rgba(0,0,0,0.1)',
                  distance: 20,
                  textStyle: {
                    opacity: 1
                  }
                },
                emphasis: {
                  itemStyle: {
                    shadowBlur: 20,
                    shadowColor: 'rgba(232,67,147,0.5)'
                  }
                }
              }
            ]
          });
          
          window.addEventListener('resize', () => chart.resize());
        });
    });
  </script>
</body>
</html>
